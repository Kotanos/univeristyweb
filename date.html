<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1" name="viewport"/>
	<title>Data</title>
	<link rel="shortcut icon" href="img/favicon.png" type="image/png">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>

	<div class="wrapper">
		<!-- Шапка -->
		<header>
			<div class="info-header">
				<div class="fio">
					<h1>Шишов Николай Александрович </h1>
				</div>
				<nav>
					<ul class="main-menu">
						<li><a href="index.html">Форматирование</a></li>
						<li><a href="style-css.html">CSS</a></li>
						<li><a href="js1.html">Js</a></li>
						<li><a href="krossvord.html">Кроссворд</a></li>
						<li><a href="form.html">Формы</a></li>
						<li><a class="active" href="date.html">Даты</a></li>
					</ul>            
				</nav> 
			</div>
			<div class="logo">
				<img src="img/logo.png" alt="" usemap="#image-map">
				<map name="image-map">
			<area target="" alt="" title="" href="style-css.html" coords="1,1,106,1,2,69" shape="poly">
					<area target="" alt="" title="" href="krossvord.html" coords="214,2,3,141,104,142,213,66" shape="poly">
					<area target="" alt="" title="" href="date.html" coords="214,70,109,142,213,141" shape="poly">
					<area target="" alt="" title="" href="js1.html" coords="111,0,0,75,1,141,211,0" shape="poly">
				</map>
			</div>

		</header>
		<!-- Текстовый блок -->
		<main>
			<div class="row content-div">
				<div class="row">
					<form name="myForm">
						<p>
							Фамилия
							<input type="text" name="familiya" value="vasia">
						</p>
						<p>
							Дата рождения
							<input type="date" name="date" value="2021-01-01" max="2021-06-02">
						</p>
						<p>
							Оклад
							<input type="number" min="1" step="any" name="zp" value="1">
						</p>
						<p>
							<input type="button" id="submit_form" value="Добавить">
						</p>
					</form>
				</div>
				<div class="row">
					<table border="1" width="100%" id="table">
						<thead>
							<tr>
								<th>
									Фамилия
								</th>
								<th>
									Дата рождения
								</th>
								<th>
									Оклад
								</th>
								<th>
									Возраст
								</th>
							</tr>
						</thead>
						<tbody id="tables">

						</tbody>
					</table>
					<p id="avgsalary">
					</p>
				</div>
			</div>
		</main>
		<!-- Подвал -->
		<footer class="text-footer">       
				<span>Шишов Николай Александрович©</span>
			    <a href="http://gmail.com" class="footer_mail">kapitnas@gmail.com</a>
		</footer>
	</div>
	<script>
		let button = document.getElementById('submit_form');
		let salary = document.getElementById('avgsalary')
		var sum_salary = 0;
		var count = 0;
		button.onclick = function () {
			createTable();
		};

		function calcAge() {
			let date = parseInt(document.forms['myForm']['date'].value.substring(0, 4));
			let age = (new Date().getFullYear()) - date
			return age;
		}

		function createTable() {
			let age = calcAge()
			let table = "<table border='1' width='100%' cellpadding='5'>" +
					"<tbody>" +
					"<tr>" +
					"<td>" + document.forms["myForm"]["familiya"].value + "</td>" +
					"<td>" + document.forms["myForm"]["date"].value + "</td>" +
					"<td>" + document.forms["myForm"]["zp"].value + "</td>" +
					"<td>" + age + "</td>" +
					"</tr>" +
					"</tbody></table>";
			if (age < 30) {
				sum_salary += parseInt(document.forms["myForm"]["zp"].value);
				count++;
			}
			document.getElementById('tables').innerHTML += table;
			salary.innerText = sum_salary / count;
		}
	</script>
</body>
</html>